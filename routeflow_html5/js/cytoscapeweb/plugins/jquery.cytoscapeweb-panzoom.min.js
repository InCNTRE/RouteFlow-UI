
/* jquery.cytoscapeweb-panzoom.min.js */

/**
 * This file is part of Cytoscape Web snapshot-2012.03.27-15.39.21.
 * 
 * Cytoscape Web is free software: you can redistribute it and/or modify it
 * under the terms of the GNU Lesser General Public License as published by the Free
 * Software Foundation, either version 3 of the License, or (at your option) any
 * later version.
 * 
 * Cytoscape Web is distributed in the hope that it will be useful, but WITHOUT
 * ANY WARRANTY; without even the implied warranty of MERCHANTABILITY or FITNESS
 * FOR A PARTICULAR PURPOSE. See the GNU Lesser General Public License for more
 * details.
 * 
 * You should have received a copy of the GNU Lesser General Public License along with
 * Cytoscape Web. If not, see <http://www.gnu.org/licenses/>.
 */
 
(function(a){var b={zoomFactor:0.05,zoomDelay:16,minZoom:0.1,maxZoom:10,panSpeed:10,panDistance:10,panDragAreaSize:75,panMinPercentSpeed:0.25,panInactiveArea:8,panIndicatorMinOpacity:0.65,staticPosition:true,autodisableForMobile:true};a.fn.cytoscapewebPanzoom=function(f){var c=a.extend(true,{},b,f);var d=f;var e={destroy:function(){var g=a(this);g.find(".ui-cytoscapeweb-panzoom").remove()},init:function(){var g="ontouchstart" in window;if(g&&c.autodisableForMobile){return a(this)}return a(this).each(function(){var D=a(this);
var j=a('<div class="ui-cytoscapeweb-panzoom"></div>');D.append(j);if(c.staticPosition){j.addClass("ui-cytoscapeweb-panzoom-static")}var i=a('<div class="ui-cytoscapeweb-panzoom-zoom-in ui-cytoscapeweb-panzoom-zoom-button"><span class="ui-icon ui-icon-plusthick"></span></div>');j.append(i);var z=a('<div class="ui-cytoscapeweb-panzoom-zoom-out ui-cytoscapeweb-panzoom-zoom-button"><span class="ui-icon ui-icon-minusthick"></span></div>');j.append(z);var A=a('<div class="ui-cytoscapeweb-panzoom-reset ui-cytoscapeweb-panzoom-zoom-button"><span class="ui-icon ui-icon-arrowthick-2-ne-sw"></span></div>');
j.append(A);var F=a('<div class="ui-cytoscapeweb-panzoom-slider"></div>');j.append(F);F.append('<div class="ui-cytoscapeweb-panzoom-slider-background"></div>');var L=a('<div class="ui-cytoscapeweb-panzoom-panner"></div>');j.append(L);var o=a('<div class="ui-cytoscapeweb-panzoom-panner-handle"></div>');L.append(o);var G=a('<div class="ui-cytoscapeweb-panzoom-pan-up ui-cytoscapeweb-panzoom-pan-button"><span class="ui-icon ui-icon-triangle-1-n"></span></div>');var u=a('<div class="ui-cytoscapeweb-panzoom-pan-down ui-cytoscapeweb-panzoom-pan-button"><span class="ui-icon ui-icon-triangle-1-s"></span></div>');
var q=a('<div class="ui-cytoscapeweb-panzoom-pan-left ui-cytoscapeweb-panzoom-pan-button"><span class="ui-icon ui-icon-triangle-1-w"></span></div>');var m=a('<div class="ui-cytoscapeweb-panzoom-pan-right ui-cytoscapeweb-panzoom-pan-button"><span class="ui-icon ui-icon-triangle-1-e"></span></div>');L.append(G).append(u).append(q).append(m);var I=a('<div class="ui-cytoscapeweb-panzoom-pan-indicator"></div>');L.append(I);function t(Q){var M={x:Q.originalEvent.pageX-L.offset().left-L.width()/2,y:Q.originalEvent.pageY-L.offset().top-L.height()/2};
var O=c.panDragAreaSize;var R=Math.sqrt(M.x*M.x+M.y*M.y);var N=Math.min(R/O,1);if(R<c.panInactiveArea){return{x:NaN,y:NaN}}M={x:M.x/R,y:M.y/R};N=Math.max(c.panMinPercentSpeed,N);var P={x:-1*M.x*(N*c.panDistance),y:-1*M.y*(N*c.panDistance)};return P}function E(){clearInterval(x);a(window).unbind("mousemove",n);I.hide()}function J(S){var N=S;var R=Math.sqrt(N.x*N.x+N.y*N.y);var Q={x:-1*N.x/R,y:-1*N.y/R};var M=L.width();var O=L.height();var P=R/c.panDistance;I.show().css({left:M/2*Q.x+M/2,top:O/2*Q.y+O/2,opacity:Math.max(c.panIndicatorMinOpacity,P)})
}var x;var n=function(M){M.stopPropagation();M.preventDefault();clearInterval(x);var N=t(M);if(isNaN(N.x)||isNaN(N.y)){I.hide();return}J(N);x=setInterval(function(){D.cytoscapeweb("get").panBy(N)},c.panSpeed)};o.bind("mousedown",function(M){n(M);a(window).bind("mousemove",n)});o.bind("mouseup",function(){E()});a(window).bind("mouseup blur",function(){E()});var C=100;var y=Math.floor(Math.log(c.minZoom)/Math.log(c.maxZoom)*C);function h(){var N=F.find(".ui-slider-handle");var R=N.parent();var U=N.position();
var O=R.width();var V=R.height();var P=U.left;var M=V-U.top;var S=C-y;var Q=y;var T=c.staticPosition?(M/V):(P/O);return Math.round(T*S+Q)}function H(){var O=D.cytoscapeweb("get");var N=h();var M=l(N);clearTimeout(B);B=null;O.zoom({level:M,renderedPosition:{x:D.width()/2,y:D.height()/2}})}F.slider({min:y,max:C,step:1,val:K(D.cytoscapeweb("get").zoom()),orientation:c.staticPosition?"vertical":"horizontal",slide:function(M){if(M.originalEvent.type=="keydown"){return false}}});function r(){H()}function s(){p=true;
r();a(window).unbind("mousemove",r);a(window).bind("mousemove",r)}function w(){a(window).unbind("mousemove",r);p=false}var p=false;F.find(".ui-slider-handle").bind("mousedown",function(){s()}).bind("mouseup",function(){w()});F.bind("mousedown",function(M){if(M.target!=F.find(".ui-slider-handle")[0]){s()}});a(window).bind("mouseup blur",function(){w()});var B;D.cytoscapeweb("get").bind("zoom",function(){if(B!=null||p){return}B=setTimeout(function(){var M=cy.zoom();var O=K(M);var N=(O-y)/(C-y);if(N>1){N=1
}if(N<0){N=0}var P=c.staticPosition?"bottom":"left";F.find(".ui-slider-handle").css(P,(100*N)+"%");B=null},10)});function l(M){return Math.pow(10,M/100)}function K(M){return Math.log(M)*100/Math.log(10)}if(!c.staticPosition){j.draggable({containment:"parent"})}var v;function k(N,M){N.bind("mousedown",function(O){O.preventDefault();O.stopPropagation();if(O.button!=0){return}var P=D.cytoscapeweb("get");v=setInterval(function(){var R=P.zoom();var Q=P.zoom()*M;if(Q<c.minZoom){Q=c.minZoom}if(Q>c.maxZoom){Q=c.maxZoom
}if((Q==c.maxZoom&&R==c.maxZoom)||(Q==c.minZoom&&R==c.minZoom)){return}P.zoom({level:Q,renderedPosition:{x:D.width()/2,y:D.height()/2}})},c.zoomDelay);return false});a(window).bind("mouseup blur",function(){clearInterval(v)})}k(i,(1+c.zoomFactor));k(z,(1-c.zoomFactor));A.bind("mousedown",function(M){if(M.button!=0){return}var N=D.cytoscapeweb("get");N.fit();return false})})}};if(e[d]){return e[d].apply(this,Array.prototype.slice.call(arguments,1))}else{if(typeof d=="object"||!d){return e.init.apply(this,arguments)
}else{a.error("No such function `"+d+"` for jquery.cytoscapewebPanzoom")}}return a(this)}})(jQuery);