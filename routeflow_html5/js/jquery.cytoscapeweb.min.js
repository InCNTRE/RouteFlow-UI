
/* jquery.cytoscapeweb.min.js */

/**
 * This file is part of Cytoscape Web snapshot-2012.03.27-15.39.21.
 * 
 * Cytoscape Web is free software: you can redistribute it and/or modify it
 * under the terms of the GNU Lesser General Public License as published by the Free
 * Software Foundation, either version 3 of the License, or (at your option) any
 * later version.
 * 
 * Cytoscape Web is distributed in the hope that it will be useful, but WITHOUT
 * ANY WARRANTY; without even the implied warranty of MERCHANTABILITY or FITNESS
 * FOR A PARTICULAR PURPOSE. See the GNU Lesser General Public License for more
 * details.
 * 
 * You should have received a copy of the GNU Lesser General Public License along with
 * Cytoscape Web. If not, see <http://www.gnu.org/licenses/>.
 */
 
(function(a){a.cytoscapeweb=function(){return a.cytoscapeweb.init.apply(this,arguments)};a.cytoscapeweb.fn={}})(jQuery);(function(b,a){a.is={string:function(c){return c!=null&&typeof c==typeof""},fn:function(c){return c!=null&&typeof c==typeof function(){}},array:function(c){return c!=null&&c instanceof Array},plainObject:function(c){return c!=null&&typeof c==typeof{}&&!a.is.array(c)},number:function(c){return c!=null&&typeof c==typeof 1&&!isNaN(c)},color:function(c){return c!=null&&typeof c==typeof""&&b.Color(c).toString()!=""
},bool:function(c){return c!=null&&typeof c==typeof true},elementOrCollection:function(c){return a.is.element(c)||a.is.collection(c)},element:function(c){return c instanceof a.CyElement},collection:function(c){return c instanceof a.CyCollection},emptyString:function(c){if(c==null){return true}else{if(a.is.string(c)){return c.match(/^\s+$/)!=null}}return false},nonemptyString:function(c){return c!=null&&a.is.string(c)&&c.match(/^\s+$/)==null}}})(jQuery,jQuery.cytoscapeweb);(function(b,a){a.util={copy:function(c){if(c==null){return c
}if(a.is.array(c)){return b.extend(true,[],c)}else{if(a.is.plainObject(c)){return b.extend(true,{},c)}else{return c}}},setMap:function(c){var d=c.map;b.each(c.keys,function(f,e){if(f<c.keys.length-1){if(d[e]==null){d[e]={}}d=d[e]}else{d[e]=c.value}})},getMap:function(c){var f=c.map;for(var e=0;e<c.keys.length;e++){var d=c.keys[e];f=f[d];if(f==null){return f}}return f},capitalize:function(c){if(a.is.emptyString(c)){return c}return c.charAt(0).toUpperCase()+c.substring(1)}}})(jQuery,jQuery.cytoscapeweb);
(function(e,c){var d=false;var b=false;var a=c.console={option:function(f,g){if(f==d){return d=(g===undefined?d:g)}else{if(f==b){return b=(g===undefined?b:g)}}},debug:function(){if(d||!b||e.browser.msie){return}if(window.console!=null&&window.console.debug!=null){window.console.debug.apply(window.console,arguments)}else{if(window.console!=null&&window.console.log!=null){window.console.log.apply(window.console,arguments)}}},log:function(){if(d||e.browser.msie){return}if(window.console!=null&&window.console.log!=null){window.console.log.apply(window.console,arguments)
}},warn:function(){if(d||e.browser.msie){return}if(window.console!=null&&window.console.warn!=null){window.console.warn.apply(window.console,arguments)}else{a.log.apply(window.console,arguments)}},error:function(){if(d||e.browser.msie){return}if(window.console!=null&&window.console.error!=null){window.console.error.apply(window.console,arguments);if(window.console.trace!=null){window.console.trace()}}else{a.log.apply(window.console,arguments);throw"Cytoscape Web encountered the previously logged error";
if(window.console.trace!=null){window.console.trace()}}}}})(jQuery,jQuery.cytoscapeweb);(function(h,c){var f={};c.extensions=f;var d={};c.modules=d;function b(k,j,l){var i={};i[j]=l;switch(k){case"core":case"collection":c.fn[k](i)}return c.util.setMap({map:f,keys:[k,j],value:l})}function g(j,i){return c.util.getMap({map:f,keys:[j,i]})}function e(l,j,k,i,m){return c.util.setMap({map:d,keys:[l,j,k,i],value:m})}function a(l,j,k,i){return c.util.getMap({map:d,keys:[l,j,k,i]})}c.extension=function(){if(arguments.length==2){return g.apply(this,arguments)
}else{if(arguments.length==3){return b.apply(this,arguments)}else{if(arguments.length==4){return a.apply(this,arguments)}else{if(arguments.length==5){return e.apply(this,arguments)}else{c.console.error("Invalid extension access syntax")}}}}}})(jQuery,jQuery.cytoscapeweb);(function(b,a){b.fn.cytoscapeweb=function(f){if(f=="get"){var g=b(this).data("cytoscapeweb");return g.cy}else{if(a.is.fn(f)){var e=f;var g=b(this).data("cytoscapeweb");if(g!=null&&g.cy!=null&&g.ready){e.apply(g.cy,[])}else{if(g==null){g={}
}if(g.readies==null){g.readies=[]}g.readies.push(e);b(this).data("cytoscapeweb",g)}}else{if(a.is.plainObject(f)){return b(this).each(function(){var i=b.extend({},f,{container:b(this)});b.cytoscapeweb(i)})}else{var h=[];var c=[];for(var d=1;d<arguments.length;d++){c[d-1]=arguments[d]}b(this).each(function(){var j=b(this).data("cytoscapeweb");var l=j.cy;var k=f;if(l!=null&&a.is.fn(l[k])){var i=l[k].apply(l,c);h.push(i)}});if(h.length==1){h=h[0]}else{if(h.length==0){h=b(this)}}return h}}}};a.init=function(c){if(a.is.plainObject(c)){return new a.CyCore(c)
}else{if(a.is.string(c)){return a.extension.apply(a.extension,arguments)}}};if(b.fn.cy==null&&b.cy==null){b.fn.cy=b.fn.cytoscapeweb;b.cy=b.cytoscapeweb}})(jQuery,jQuery.cytoscapeweb);(function(b,a){a.fn.core=function(d,e){b.each(d,function(f,g){c.prototype[f]=g})};function c(e){var g=this;var f={layout:{name:"grid"},renderer:{name:"svg"},style:{}};var d=b.extend(true,{},f,e);if(d.container==null){a.console.error("Cytoscape Web must be called on an element; specify `container` in options or call on selector directly with jQuery, e.g. $('#foo').cy({...});");
return}else{if(b(d.container).size()>1){a.console.error("Cytoscape Web can not be called on multiple elements in the functional call style; use the jQuery selector style instead, e.g. $('.foo').cy({...});");return}}this._private={options:d,style:d.style,nodes:{},edges:{},continuousMapperBounds:{nodes:{},edges:{}},continuousMapperUpdates:[],live:{},selectors:{},listeners:{},animation:{elements:null},scratch:{},layout:null,renderer:null,notificationsEnabled:true,zoomEnabled:true,panEnabled:true};g.initRenderer(d.renderer);
g.load(d.elements,function(){var h=b(d.container).data("cytoscapeweb");if(h==null){h={}}h.cy=g;h.ready=true;if(h.readies!=null){b.each(h.readies,function(j,k){g.bind("ready",k)});h.readies=[]}b(d.container).data("cytoscapeweb",h);g.startAnimationLoop();if(a.is.fn(d.ready)){d.ready.apply(g,[g])}g.trigger("ready")},function(){if(a.is.fn(d.done)){d.done.apply(g,[g])}g.trigger("done")})}a.CyCore=c;a.fn.core({container:function(){return b(this._private.options.container)}})})(jQuery,jQuery.cytoscapeweb);
(function(b,a){a.fn.core({add:function(c){var d=[];this.noNotifications(function(){if(a.is.element(c)){var e=c;d.push(e);e.restore()}else{if(a.is.collection(c)){var f=c;f.each(function(g,h){d.push(h)});f.restore()}else{if(a.is.array(c)){b.each(c,function(h,g){d.push(new a.CyElement(cy,g))})}else{if(a.is.plainObject(c)&&(a.is.array(c.nodes)||a.is.array(c.edges))){b.each(["nodes","edges"],function(g,h){if(a.is.array(c[h])){b.each(c[h],function(j,k){d.push(new a.CyElement(cy,b.extend({},k,{group:h})))
})}})}else{d.push(new a.CyElement(cy,c))}}}}});this.notify({type:"add",collection:d});return new a.CyCollection(cy,d)},remove:function(d){if(!a.is.elementOrCollection(d)){d=d}else{if(a.is.string(d)){var c=d;d=this.$(c)}}return d.remove()},load:function(d,e,c){var g=this;g.elements().remove();g.notifications(false);if(d!=null){if(a.is.plainObject(d)){b.each(["nodes","edges"],function(h,j){var k=d[j];if(k!=null){b.each(k,function(m,n){var l=new a.CyElement(g,b.extend({},n,{group:j}))})}})}else{if(a.is.array(d)){b.each(d,function(j,k){var h=new a.CyElement(g,k)
})}}}function f(){g.layout(b.extend({},g._private.options.layout,{ready:function(){g.notifications(true);g.notify({type:"load",collection:g.elements(),style:g._private.style});if(a.is.fn(e)){e.apply(g,[g])}g.trigger("load");g.trigger("layoutready")},stop:function(){if(a.is.fn(c)){c.apply(g,[g])}g.trigger("layoutdone")}}))}if(window.chrome){setTimeout(function(){f()},30)}else{f()}return this}})})(jQuery,jQuery.cytoscapeweb);(function(b,a){a.fn.core({startAnimationLoop:function(){var h=this;var m=this._private;
var g=10;var n=false;var j=true;m.animation.elements=new a.CyCollection(h);var k=window.requestAnimationFrame||window.mozRequestAnimationFrame||window.webkitRequestAnimationFrame||window.msRequestAnimationFrame;if(k==null||!j){k=function(o){window.setTimeout(function(){o(+new Date)},g)}}var d=h.container()[0];function l(){function o(){k(function(p){e(p);l()},d)}if(n){setTimeout(function(){o()},g)}else{o()}}l();function e(o){m.animation.elements.each(function(s,v){try{v=v.element();var x=v._private.animation.current;
var p=v._private.animation.queue;if(x.length==0){var u=p;var t=u.length>0?u.shift():null;if(t!=null){t.callTime=+new Date;x.push(t)}}b.each(x,function(y,q){f(v,q,o)});var r=[];for(var s=0;s<x.length;s++){if(x[s].done){r.push(x[s].params.complete);x.splice(s,1);s--}}b.each(r,function(q,y){if(a.is.fn(complete)){complete.apply(v)}})}catch(w){}});if(m.animation.elements.size()>0){h.notify({type:"draw",collection:m.animation.elements})}m.animation.elements=m.animation.elements.filter(function(){var q=this;
var p=q._private.animation.queue;var r=q._private.animation.current;return r.length>0||p.length>0})}function f(o,t,p){var q=t.properties;var u=t.params;var r=t.callTime;var s;if(u.duration==0){s=1}else{s=Math.min(1,(p-r)/u.duration)}function v(x){if(x.end!=null){var y=x.start;var w=x.end;b.each(w,function(z,A){if(c(y[z],w[z])){o._private[x.field][z]=i(y[z],w[z],s)}})}}if(q.delay==null){v({end:q.position,start:t.startPosition,field:"position"});v({end:q.bypass,start:t.startStyle,field:"bypass"})}if(a.is.fn(u.step)){u.step.apply(o,[p])
}if(s>=1){t.done=true}return s}function c(p,o){if(p==null||o==null){return false}if(a.is.number(p)&&a.is.number(o)){return true}else{if((p)&&(o)){return true}}return false}function i(q,s,w){if(a.is.number(q)&&a.is.number(s)){return q+(s-q)*w}else{if((q)&&(s)){var u=b.Color(q).fix().toRGB();var t=b.Color(s).fix().toRGB();function p(z,r){var A=r-z;var y=z;return Math.round(w*A+y)}var o=p(u.red(),t.red());var v=p(u.green(),t.green());var x=p(u.blue(),t.blue());return b.Color([o,v,x],"RGB").toHEX().toString()
}}return undefined}}})})(jQuery,jQuery.cytoscapeweb);(function(e,a){a.fn.core({one:d({target:"cy",one:true}),bind:d({target:"cy"}),unbind:c({target:"cy"}),trigger:b({target:"cy"}),delegate:function(f,g,i,h){this.$(f).live(g,i,h);return this},undelegate:function(f,g,h){this.$(f).die(g,h);return this},on:function(g,f,i,h){if(a.is.string(f)){this.$(f).live(g,i,h)}else{f=undefined;i=f;h=i;this.bind(g,i,h)}return this},off:function(h,f,g){if(a.is.string(f)){this.$(f).live(events,g)}else{g=f;f=undefined;
this.unbind(events,g)}return this},background:function(){var g=this;if(g._private.background==null){var f=["on","off","bind","unbind","one","trigger"];g._private.background={};e.each(f,function(h,j){g._private.background[j]=function(){return g["bg"+a.util.capitalize(j)].apply(g,arguments)}})}return g._private.background},bgOne:d({target:"bg",one:true}),bgOn:d({target:"bg"}),bgOff:c({target:"bg"}),bgBind:d({target:"bg"}),bgUnbind:c({target:"bg"}),bgTrigger:b({target:"bg"})});function d(g){var f={target:"cy",one:false};
g=e.extend({},f,g);return function(h,k,j){var l=this;var i=l._private.listeners;if(j===undefined){j=k;k=undefined}h=h.split(/\s+/);e.each(h,function(m,n){if(a.is.emptyString(n)){return}if(i[g.target]==null){i[g.target]={}}if(i[g.target][n]==null){i[g.target][n]=[]}i[g.target][n].push({callback:j,data:k,one:g.one})});return l}}function c(g){var f={target:"cy"};g=e.extend({},f,g);return function(h,j){var k=this;var i=k._private.listeners;if(i[g.target]==null){return}h=h.split(/\s+/);e.each(h,function(l,m){if(a.is.emptyString(m)){return
}if(j===undefined){delete i[g.target][m];return}else{for(var l=0;l<i[g.target][m].length;l++){var n=i[g.target][m][l];if(n.callback==j){i[g.target][m].splice(l,1);l--}}}});return k}}function b(g){var f={target:"cy"};g=e.extend({},f,g);return function(j,k){var m=this;var i=m._private.listeners;var h;var l=g.target;if(a.is.plainObject(j)){h=[j.type]}else{h=j.split(/\s+/)}e.each(h,function(p,q){if(i[l]==null||i[l][q]==null){return}for(var o=0;o<i[l][q].length;o++){var s=i[l][q][o];var r;if(a.is.plainObject(j)){r=j;
j=r.type}else{r=e.Event(j)}r.data=s.data;r.cy=r.cytoscapeweb=m;var n=[r];if(k!=null){e.each(k,function(u,t){n.push(t)})}if(s.one){i[l][q].splice(o,1);o--}s.callback.apply(m,n)}})}}})(jQuery,jQuery.cytoscapeweb);(function(b,a){a.fn.core({exportTo:function(f){var e=f.name;var d=a.extension("exporter",e);if(d==null){a.console.error("No exporter with name `%s` found; did you remember to register it?",e)}else{var c=new d({cy:cy,renderer:this.renderer()});return c.run()}}})})(jQuery,jQuery.cytoscapeweb);
(function(b,a){a.fn.core({layout:function(c){var d=this;if(c==null){c=this._private.options.layout}this.initLayout(c);d.trigger("layoutstart");this._private.layout.run(b.extend({},c,{renderer:d._private.renderer,cy:d}));return this},initLayout:function(e){if(e==null){a.console.error("Layout options must be specified to run a layout");return}if(e.name==null){a.console.error("A `name` must be specified to run a layout");return}var d=e.name;var c=a.extension("layout",d);if(c==null){a.console.error("Can not apply layout: No such layout `%s` found; did you include its JS file?",d);
return}this._private.layout=new c();this._private.options.layout=e}})})(jQuery,jQuery.cytoscapeweb);(function(b,a){a.fn.core({notify:function(f){if(!this._private.notificationsEnabled){return}var e=this.renderer();if(a.is.element(f.collection)){var c=f.collection;f.collection=new a.CyCollection(cy,[c])}else{if(a.is.array(f.collection)){var d=f.collection;f.collection=new a.CyCollection(cy,d)}}if(this.getContinuousMapperUpdates().length!=0){f.updateMappers=true;this.clearContinuousMapperUpdates()}e.notify(f)
},notifications:function(c){var d=this._private;if(c===undefined){return d.notificationsEnabled}else{d.notificationsEnabled=c?true:false}},noNotifications:function(c){this.notifications(false);c();this.notifications(true)}})})(jQuery,jQuery.cytoscapeweb);(function(b,a){a.fn.core({renderer:function(){return this._private.renderer},initRenderer:function(d){var e=this;var c=a.extension("renderer",d.name);if(c==null){a.console.error("Can not initialise: No such renderer `$s` found; did you include its JS file?",d.name);
return}this._private.renderer=new c(b.extend({},d,{cy:e,style:e._private.style,styleCalculator:{calculate:function(k,t){if(a.is.plainObject(t)){var o;if(t.customMapper!=null){o=t.customMapper.apply(k,[k.data()])}else{if(t.passthroughMapper!=null){var q=t.passthroughMapper;o=k._private.data[q]}else{if(t.discreteMapper!=null){var q=t.discreteMapper.attr;var l=t.discreteMapper.entries;var r=k.data(q);b.each(l,function(w,x){var v=x.attrVal;var y=x.mappedVal;if(v==r){o=y}})}else{if(t.continuousMapper!=null){var f=t.continuousMapper;
if(f.attr.name==null||typeof f.attr.name!=typeof""){a.console.error("For style.%s.%s, `attr.name` must be defined as a string since it's a continuous mapper",k.group(),styleName);return}var g=e._private.continuousMapperBounds[k._private.group][f.attr.name];g={min:g==null?0:g.min,max:g==null?0:g.max};if(f.attr.min!=null){g.min=f.attr.min}if(f.attr.max!=null){g.max=f.attr.max}if(g!=null){var j=k.data(f.attr.name);var n=(j-g.min)/(g.max-g.min);if(g.max==g.min){n=1}if(n>1){n=1}else{if(n<0||j==null||isNaN(n)){n=0
}}if(j==null&&t.defaultValue!=null){o=t.defaultValue}else{if(a.is.number(f.mapped.min)&&a.is.number(f.mapped.max)){o=n*(f.mapped.max-f.mapped.min)+f.mapped.min}else{if((f.mapped.min)&&(f.mapped.max)){var m=b.Color(f.mapped.min).fix().toRGB();var u=b.Color(f.mapped.max).fix().toRGB();var h=Math.round(m.red()*(1-n)+u.red()*n);var i=Math.round(m.green()*(1-n)+u.green()*n);var s=Math.round(m.blue()*(1-n)+u.blue()*n);o=b.Color([h,i,s],"RGB").toHEX().toString()}else{a.console.error("Unsupported value used in mapper for `style.%s.%s` with min mapped value `%o` and max `%o` (neither number nor colour)",k.group(),f.styleName,f.mapped.min,f.mapped.max);
return}}}}else{a.console.error("Attribute values for `%s.%s` must be numeric for continuous mapper `style.%s.%s` (offending %s: `%s`)",k.group(),f.attr.name,k.group(),styleName,k.group(),k.data("id"));return}}}}}var p=t.defaultValue;if(o==null){o=p}}else{o=t}return o}}}))}})})(jQuery,jQuery.cytoscapeweb);(function($,$$){$$.fn.core({scratch:function(name,value){if(value===undefined){return eval("this._private.scratch."+name)}else{eval("this._private.scratch."+name+" = "+value+";");return this}},removeScratch:function(name){if(name===undefined){structs.scratch={}
}else{eval("delete this._private.scratch."+name+";")}return this}})})(jQuery,jQuery.cytoscapeweb);(function(c,a){a.fn.core({collection:function(){return new a.CyCollection(this)},getElementById:function(d){return this._private.nodes[d]||this._private.edges[d]||new a.CyCollection(this)},nodes:b({addLiveFunction:true,group:"nodes"}),edges:b({addLiveFunction:true,group:"edges"}),elements:function(){return this.$.apply(this,arguments)},$:b({addLiveFunction:true}),filter:function(d){if(a.is.string(d)){return this.$(d)
}else{if(a.is.fn(d)){return this.$(d).filter(d)}}}});function b(f){var e={group:undefined,addLiveFunction:false};f=c.extend({},e,f);var d=[];if(f.group==null){d=["nodes","edges"]}else{d=[f.group]}return function(g){var j=this;var h=[];if(g==null){g=""}c.each(d,function(k,l){c.each(j._private[l],function(n,m){h.push(m)})});var i=new a.CyCollection(j,h);var g;if(f.group!=null){g=new a.CySelector(j,f.group,g)}else{g=new a.CySelector(j,g)}return g.filter(i,f.addLiveFunction)}}})(jQuery,jQuery.cytoscapeweb);
(function(b,a){a.fn.core({style:function(d){var c;if(d===undefined){c=a.util.copy(this._private.style)}else{this._private.style=a.util.copy(d);c=this;this.notify({type:"style",style:this._private.style})}return c},getContinuousMapperUpdates:function(){var d=this;var c=d._private;return c.continuousMapperUpdates},clearContinuousMapperUpdates:function(){var d=this;var c=d._private;c.continuousMapperUpdates=[]},addContinuousMapperBounds:function(k,d,e){var f=this;var m=f._private;var n=k._private.group;
if(a.is.number(e)){if(m.continuousMapperBounds[n][d]==null){m.continuousMapperBounds[n][d]={min:e,max:e,vals:[]}}var c=m.continuousMapperBounds[n][d];var l=c.vals;var h=false;var o=null,g=null;if(l.length>0){o=l[0];g=l[l.length-1]}for(var j=0;j<l.length;j++){if(e<=l[j]){l.splice(j,0,e);h=true;break}}if(!h){l.push(e)}c.min=l[0];c.max=l[l.length-1];if(o!=c.min||g!=c.max){m.continuousMapperUpdates.push({group:k.group(),element:k})}}},updateContinuousMapperBounds:function(h,d,j,e){var f=this;var k=f._private;
var l=h._private.group;var c=k.continuousMapperBounds[l][d];if(c==null){this.addContinuousMapperBounds(h,d,e);return}var i=c.vals;var m=null,g=null;if(i.length>0){m=i[0];g=i[i.length-1]}this.removeContinuousMapperBounds(h,d,j);this.addContinuousMapperBounds(h,d,e);if(m!=c.min||g!=c.max){k.continuousMapperUpdates.push({group:h.group(),element:h})}},removeContinuousMapperBounds:function(j,d,e){var f=this;var l=f._private;var m=j._private.group;var c=l.continuousMapperBounds[m][d];if(c==null){return
}var n=null,g=null;var k=c.vals;if(k.length>0){n=k[0];g=k[k.length-1]}for(var h=0;h<k.length;h++){if(e==k[h]){k.splice(h,1);break}}if(k.length>0){c.min=k[0];c.max=k[k.length-1]}else{c.min=null;c.max=null}if(n!=c.min||g!=c.max){l.continuousMapperUpdates.push({group:j.group(),element:j})}}})})(jQuery,jQuery.cytoscapeweb);(function(b,a){a.fn.core({panning:function(c){if(c!==undefined){this._private.panEnabled=c?true:false}else{return this._private.panEnabled}return this},zooming:function(c){if(c!==undefined){this._private.zoomEnabled=c?true:false
}else{return this._private.zoomEnabled}return this},pan:function(d){var c=this.renderer().pan(d);if(c==null){this.trigger("pan");return this}return c},panBy:function(d){var c=this.renderer().panBy(d);if(c==null){this.trigger("pan");return this}return c},fit:function(d){var c=this.renderer().fit({elements:d,zoom:true});if(c==null){this.trigger("zoom");this.trigger("pan");return this}return c},zoom:function(d){var c=this.renderer().zoom(d);if(c!=null){return c}else{this.trigger("zoom");return this}},center:function(c){this.renderer().fit({elements:c,zoom:false});
this.trigger("pan");return this},centre:function(){return this.center.apply(cy,arguments)},reset:function(){this.renderer().pan({x:0,y:0});this.renderer().zoom(1);this.trigger("zoom");this.trigger("pan");return this}})})(jQuery,jQuery.cytoscapeweb);(function(d,c){c.fn.collection=function(f,h){for(var g in f){c.CyCollection.prototype[g]=f[g];c.CyElement.prototype[g]=function(){var i=this.collection();return i[g].apply(i,arguments)}}};var b={prefix:{nodes:"n",edges:"e"},id:{nodes:0,edges:0},generate:function(g,j){var h=g._private.group;
var f=g._private.cy._private;var i=j!=null?j:this.prefix[h]+this.id[h];while(f[h][i]!=null){i=this.prefix[h]+(++this.id[h])}return i}};function e(h,g){var f=this;if(h===undefined||g===undefined||h.$==null){c.console.error("An element must have a core reference and parameters set");return}if(g.group!="nodes"&&g.group!="edges"){c.console.error("An element must be of type `nodes` or `edges`; you specified `%s`",g.group);return}this.length=1;this[0]=this;this._private={cy:h,data:c.util.copy(g.data)||{},position:c.util.copy(g.position)||{},listeners:{},group:g.group,bypass:c.util.copy(g.bypass)||{},style:{},removed:true,selected:g.selected?true:false,locked:g.locked?true:false,grabbed:false,grabbable:g.grabbable||g.grabbable===undefined?true:false,classes:{},animation:{current:[],queue:[]},renderer:{},scratch:{},edges:{}};
if(g.renderedPosition!=null){this._private.position=this.cy().renderer().modelPoint(g.renderedPosition)}if(c.is.string(g.classes)){d.each(g.classes.split(/\s+/),function(k,j){if(j!=""){f._private.classes[j]=true}})}this.restore()}c.CyElement=e;e.prototype.cy=function(){return this._private.cy};e.prototype.element=function(){return this};e.prototype.collection=function(){return new a(this.cy(),[this])};function a(k,j){if(k===undefined||k.$==null){c.console.error("A collection must have a reference to the core");
return}var h={};var f=[];if(j==null){j=[]}d.each(j,function(m,l){if(l==null){return}var n=l.element()._private.data.id;if(h[n]==null){h[n]=true;f.push(l)}});for(var g=0;g<f.length;g++){this[g]=f[g]}this.length=f.length;this._private={cy:k,ids:h}}c.CyCollection=a;a.prototype.cy=function(){return this._private.cy};a.prototype.element=function(){return this[0]};a.prototype.collection=function(){return this};c.fn.collection({restore:function(f){var g=new a(this.cy());this.each(function(){if(!this.removed()){return
}var o=this.cy()._private;if(this._private.data.id==null){this._private.data.id=b.generate(this,this._private.group)}else{if(this.cy().getElementById(this._private.data.id).size()!=0){c.console.error("Can not create element: an element in the visualisation already has ID `%s`",this.element()._private.data.id);return this}}if(this.isEdge()){var m=["source","target"];for(var l=0;l<m.length;l++){var n=m[l];var j=this._private.data[n];if(j==null||j==""){c.console.error("Can not create edge with id `%s` since it has no `%s` attribute set in `data` (must be non-empty value)",this._private.data.id,n);
return}else{if(o.nodes[j]==null){c.console.error("Can not create edge with id `%s` since it specifies non-existant node as its `%s` attribute with id `%s`",this._private.data.id,n,j);return}}}var h=this.cy().getElementById(this._private.data.source);var k=this.cy().getElementById(this._private.data.target);function q(t,r,s){var i=r.element()._private.data.id;var u=s.element()._private.data.id;if(t._private.edges[i]==null){t._private.edges[i]={}}t._private.edges[i][u]={edge:s,source:h,target:k}}q(h,k,this);
q(k,h,this)}this._private.removed=false;o[this._private.group][this._private.data.id]=this;var p=this;d.each(this._private.data,function(i,r){p.cy().addContinuousMapperBounds(p,i,r)});g=g.add(this)});if(g.size()>0){if(f){g.rtrigger("add")}else{g.trigger("add")}}return this}});c.fn.collection({removed:function(){return this.element()._private.removed}});c.fn.collection({remove:function(h){var j=[];var g={};var f={};if(h===undefined){h=true}this.each(function(){if(this.isNode()){var k=this.element();
f[k.id()]=this;d.each(k._private.edges,function(l,m){d.each(m,function(o,n){g[o]=n.edge})})}if(this.isEdge()){g[this.id()]=this}});d.each([g,f],function(k,l){d.each(l,function(r,m){var n=m.element();var o=n._private.group;n._private.removed=true;delete n.cy()._private[n.group()][n.id()];d.each(n._private.data,function(s,t){n.cy().removeContinuousMapperBounds(n,s,t)});j.push(n);if(n.isEdge()){var p=n.source().element();var q=n.target().element();delete p._private.edges[q.id()][n.id()];delete q._private.edges[p.id()][n.id()]
}})});var i=new c.CyCollection(this.cy(),j);if(i.size()>0){if(h){this.cy().notify({type:"remove",collection:i})}i.trigger("remove")}return this}})})(jQuery,jQuery.cytoscapeweb);(function(b,a){a.fn.collection({animated:function(){return this.element()._private.animation.current.length>0}});a.fn.collection({clearQueue:function(){return this.each(function(){this.element()._private.animation.queue=[]})}});a.fn.collection({delay:function(c){return this.animate({delay:c},{duration:c})}});a.fn.collection({animate:function(d,e){var c=+new Date;
return this.each(function(){var i=this;var j=a.util.copy(i._private.position);var f=a.util.copy(i.style());var g=this.cy()._private;e=b.extend(true,{},{duration:400},e);switch(e.duration){case"slow":e.duration=600;break;case"fast":e.duration=200;break}if(d==null||(d.position==null&&d.bypass==null&&d.delay==null)){return}if(i.animated()&&(e.queue===undefined||e.queue)){h()}else{m()}var k;function h(){k=i._private.animation.queue;l()}function m(){k=i._private.animation.current;l()}function l(){k.push({properties:d,params:e,callTime:c,startPosition:j,startStyle:f});
g.animation.elements=g.animation.elements.add(i)}})}});a.fn.collection({stop:function(c,d){this.each(function(){var e=this;b.each(e._private.animation.current,function(f,g){if(d){b.each(g.properties,function(h,i){b.each(i,function(k,j){e._private[h][k]=j})})}});e._private.animation.current=[];if(c){e._private.animation.queue=[]}});this.cy().notify({collection:this,type:"draw"});return this}});a.fn.collection({show:function(){this.cy().renderer().showElements(this.collection());return this}});a.fn.collection({hide:function(){this.cy().renderer().hideElements(this.collection());
return this}});a.fn.collection({visible:function(){return this.cy().renderer().elementIsVisible(this.element())}})})(jQuery,jQuery.cytoscapeweb);(function(b,a){a.fn.collection({addClass:function(d){d=d.split(/\s+/);var c=this;b.each(d,function(f,e){if(a.is.emptyString(e)){return}c.each(function(){this._private.classes[e]=true})});c.rtrigger("class");return c}});a.fn.collection({hasClass:function(c){return this.element()._private.classes[c]==true}});a.fn.collection({toggleClass:function(i,d){var f=i.split(/\s+/);
var e=this;var g=[];function c(l,k){var m=l._private.classes[k]!==undefined;delete l._private.classes[k];if(m){g.push(l)}}function h(l,k){var m=l._private.classes[k]===undefined;l._private.classes[k]=true;if(m){g.push(l)}}e.each(function(){var k=this;b.each(f,function(m,l){if(l==null||l==""){return}if(d===undefined){if(k.hasClass(l)){c(k,l)}else{h(k,l)}}else{if(d){h(k,l)}else{c(k,l)}}})});if(g.length>0){var j=new a.CyCollection(e.cy(),g);j.rtrigger("class")}return e}});a.fn.collection({removeClass:function(e){e=e.split(/\s+/);
var c=this;var d=[];b.each(e,function(h,g){if(g==null||g==""){return}c.each(function(){var i=this._private.classes[g]!==undefined;delete this._private.classes[g];if(i){d.push(this)}})});if(d.length>0){var f=new a.CyCollection(c.cy(),d);f.rtrigger("class")}return c}})})(jQuery,jQuery.cytoscapeweb);(function(b,a){a.fn.collection({allAre:function(c){return this.filter(c).size()==this.size()}});a.fn.collection({is:function(c){return new a.CySelector(this.cy(),c).filter(this).size()>0}});a.fn.collection({same:function(c){return this.element()===c.element()
}});a.fn.collection({anySame:function(h){h=h.collection();var d=false;for(var e=0;e<h.size();e++){var g=h.eq(e).element();for(var c=0;c<this.size();c++){var f=this.eq(c);d=d||f.same(g);if(d){break}}if(d){break}}return d}});a.fn.collection({allSame:function(k){k=k.collection();if(k.size()!=this.size()){return false}var d=true;for(var e=0;e<k.size();e++){var h=k.eq(e);var g=false;for(var c=0;c<this.size();c++){var f=this.eq(c);g=f.same(h);if(g){break}}d=d&&g;if(!d){break}}return d}});a.fn.collection({allAreNeighbors:function(f){f=f.collection();
var e=this.neighborhood();for(var d=0;d<f.size();d++){var c=f.eq(d);if(c.intersect(e).size()==0){return false}}return true}});a.fn.collection({allAreNeighbours:function(){return this.allAreNeighbors.apply(this,[arguments])}})})(jQuery,jQuery.cytoscapeweb);(function(d,a){a.fn.collection({data:b({attr:"data",allowBinding:true,bindingEvent:"data",settingTriggersEvent:true,settingEvent:"data",validKey:{forSet:function(e){switch(e){case"id":case"source":case"target":return false;default:return true}}},onSet:function(g,e,f){this.cy().updateContinuousMapperBounds(this,g,e,f)
}})});a.fn.collection({removeData:c({attr:"data",event:"data",triggerEvent:true,onRemove:function(e,f){this.cy().removeContinuousMapperBounds(this,e,f)},validKey:function(e){switch(e){case"id":case"source":case"target":return false;default:return true}},essentialKeys:["id","source","target"]})});a.fn.collection({id:function(){return this.element()._private.data.id}});a.fn.collection({position:b({attr:"position",allowBinding:true,bindingEvent:"position",settingTriggersEvent:true,settingEvent:"position",validKey:{forSet:function(e){return this.isNode()
},forGet:function(e){return this.isNode()}},validValue:function(e,f){return true},onSet:function(g,e,f){},onGet:function(e,f){}})});a.fn.collection({positions:function(f){if(a.is.plainObject(f)){this.each(function(g,h){d.each(f,function(i,j){h._private.position[i]=j})});this.rtrigger("position")}else{if(a.is.fn(f)){var e=f;this.each(function(g,h){var j=e.apply(h,[g,h]);d.each(j,function(i,k){h._private.position[i]=k})});this.rtrigger("position")}}}});a.fn.collection({renderedPosition:b({attr:"position",allowBinding:false,settingTriggersEvent:true,settingEvent:"position",validKey:{forSet:function(e){return this.isNode()
},forGet:function(e){return this.isNode()}},validValue:function(e,f){return true},override:{forSet:function(f,h){var g={};g[f]=h;var e=this.cy().renderer().modelPoint(g);this.element()._private.position[f]=e[f]},forGet:function(f){var e=this.position(false);var g=this.cy().renderer().renderedPoint(e);return g[f]},forObjectGet:function(){return this.cy().renderer().renderedPosition(this.element())}}})});a.fn.collection({renderedDimensions:function(h){var f=this.element();var e=f.cy().renderer();var g=e.renderedDimensions(f);
if(h===undefined){return g}else{return g[h]}}});a.fn.collection({style:function(e){var f=this.element();if(e===undefined){return a.util.copy(f._private.style)}else{if(e===false){return f._private.style}else{if(a.is.string(e)){return a.util.copy(f._private.style[e])}}}}});a.fn.collection({bypass:b({attr:"bypass",allowBinding:true,bindingEvent:"bypass",settingTriggersEvent:true,settingEvent:"bypass"})});a.fn.collection({removeBypass:c({attr:"bypass",event:"bypass",triggerEvent:true})});a.fn.collection({json:function(){var g=this.element()._private;
var f=a.util.copy({data:g.data,position:g.position,group:g.group,bypass:g.bypass,removed:g.removed,selected:g.selected,locked:g.locked,grabbed:g.grabbed,grabbable:g.grabbable,classes:"",scratch:g.scratch});var e=[];d.each(g.classes,function(h,i){e.push(h)});d.each(e,function(j,h){f.classes+=h+(j<e.length-1?" ":"")});return f}});function b(e){var f={attr:"foo",allowBinding:false,bindingEvent:"foo",settingTriggersEvent:false,settingEvent:"foo",validKey:{forGet:function(h){return true},forSet:function(h){return true
}},override:{forSet:null,forGet:null,forObjectGet:null},validValue:function(h,i){return true},onSet:null,onGet:null,};var g=d.extend(true,{},f,e);return function(q,h){var r=this.element();var s=this;function o(u){if(g.validKey.forGet.apply(r,[u])){var t;if(a.is.fn(g.override.forGet)){t=g.override.forGet.apply(r,[u])}else{t=a.util.copy(r._private[g.attr][u])}if(a.is.fn(g.onGet)){g.onGet.apply(r,[u,t])}return t}else{}}function j(t,u){s.each(function(){if(g.validKey.forSet.apply(this,[t])&&g.validValue.apply(this,[t,u])){var v=this.element()._private[g.attr][t];
if(a.is.fn(g.override.forSet)){g.override.forSet.apply(this,[t,u])}else{this.element()._private[g.attr][t]=a.util.copy(u)}if(a.is.fn(g.onSet)){g.onSet.apply(r,[t,v,u])}}else{}})}function n(t,u){if(u===undefined){s.bind(g.bindingEvent,t)}else{s.bind(g.bindingEvent,u,t)}}function i(){if(g.settingTriggersEvent){s.rtrigger(g.settingEvent)}}function m(v){var t;var u=r._private[g.attr];if(a.is.fn(g.override.forObjectGet)){t=g.override.forObjectGet.apply(r,[])}else{t=u}if(v||v===undefined){t=a.util.copy(t)
}return t}if(q===undefined){return m(false)}else{if(q===false){return m(false)}else{if(h===undefined){if(a.is.string(q)){return o(q)}else{if(a.is.plainObject(q)){var l=q;d.each(l,function(t,u){j(t,u)});i()}else{if(g.allowBinding&&a.is.fn(q)){var p=q;n(p)}else{a.console.warn("Invalid first parameter for `%s()` for collection with element `%s` : expect a key string or an object"+(g.allowBinding?" or a handler function for binding":""),g.attr,r._private.data.id)}}}}else{if(g.allowBinding&&a.is.plainObject(q)&&a.is.fn(h)){var k=q;
var p=h;n(p,k)}else{if(a.is.string(q)){j(q,h);i()}else{a.console.warn("Invalid parameters for `%s()` for collection with element `%s` : expect a key string and a value"+(g.allowBinding?" or a data object and a handler function for binding":""),g.attr,r._private.data.id)}}}}}return this}}function c(e){var f={attr:"foo",event:"foo",triggerEvent:false,onRemove:function(h,i){},validKey:function(h){return true},essentialKeys:[]};var g=d.extend(true,{},f,e);return function(m){var n=this.element();var i=this;
function l(){i.each(function(){var q=this.element();var o=q._private[g.attr];var p={};d.each(g.essentialKeys,function(s,r){if(o[r]!==undefined){p[r]=o[r]}});q._private[g.attr]=p})}function h(o){i.each(function(){var p=this.element();if(g.validKey.apply(p,[o])){var q=p._private[g.attr][o];delete p._private[g.attr][o];if(a.is.fn(g.onRemove)){g.onRemove.apply(p,[o,q])}}})}function k(){if(g.triggerEvent){i.rtrigger(g.event)}}if(m===undefined){l();k()}else{if(a.is.string(m)){var j=m.split(/\s+/);d.each(j,function(p,o){if(a.is.emptyString(o)){return
}h(o)});k()}else{a.console.warn("Invalid parameters to `%s()` for collection with element `%s` : %o",g.attr,n._private.data.id,arguments)}}return this}}})(jQuery,jQuery.cytoscapeweb);(function(d,b){function a(e){return function(){var f=this.element();if(f.isNode()&&!f.removed()){var h=0;var g=this;g.connectedEdges().each(function(j,k){h+=e(g,k)});return h}else{return undefined}}}b.fn.collection({degree:a(function(f,e){if(e.source().same(e.target())){return 2}else{return 1}})});b.fn.collection({indegree:a(function(f,e){if(e.target().same(f)){return 1
}else{return 0}})});b.fn.collection({outdegree:a(function(f,e){if(e.source().same(f)){return 1}else{return 0}})});function c(f,e){return function(){var g=null;this.nodes().each(function(h,j){var k=j[f]();if(k!=null&&(g==null||e(k,g))){g=k}});return g}}b.fn.collection({minDegree:c("degree",function(f,e){return f<e})});b.fn.collection({maxDegree:c("degree",function(f,e){return f>e})});b.fn.collection({minIndegree:c("indegree",function(f,e){return f<e})});b.fn.collection({maxIndegree:c("indegree",function(f,e){return f>e
})});b.fn.collection({minOutdegree:c("outdegree",function(f,e){return f<e})});b.fn.collection({maxOutdegree:c("outdegree",function(f,e){return f>e})});b.fn.collection({totalDegree:function(){var e=0;this.nodes().each(function(f,g){e+=g.degree()});return e}})})(jQuery,jQuery.cytoscapeweb);(function(d,c){c.fn.collection({trigger:function(f,g){this.each(function(){var k=this;var o=c.is.plainObject(f)?f.type:f;var j=this.cy()._private;var n=this._private.listeners[o];function m(r,q){if(r!=null&&c.is.fn(r.callback)){var q=c.is.plainObject(f)?f:d.Event(o);
q.data=r.data;q.cy=q.cytoscapeweb=cy;var i=[q];if(g!=null){d.each(g,function(t,s){i.push(s)})}r.callback.apply(k,i)}}if(n!=null){d.each(n,function(q,r){m(r)});for(var l=0;l<n.length;l++){function h(){n.splice(l,1);l--}if(n[l].one){h()}else{if(n[l].once){var p=n[l];p.collection.each(function(i,q){if(!q.same(k)){q.unbind(o,p.callback)}});h()}}}}if(j.live[o]!=null){d.each(j.live[o],function(r,s){var i=new c.CySelector(k.cy(),r);var q=i.filter(k.collection());if(q.size()>0){d.each(s,function(t,u){m(u)
})}})}k.cy().trigger(f,g)});return this}});c.fn.collection({rtrigger:function(f,g){this.cy().notify({type:f,collection:this.filter(function(){return !this.removed()})});this.trigger(f,g)}});c.fn.collection({live:function(){c.console.warn("`live()` can be called only on collections made from top-level selectors");return this}});c.fn.collection({die:function(){c.console.warn("`die()` can be called only on collections made from top-level selectors");return this}});c.fn.collection({bind:a({listener:function(){return{}
}})});c.fn.collection({one:a({listener:function(){return{one:true}}})});c.fn.collection({once:a({listener:function(g,f){return{once:true,collection:g}},after:function(g,h,f){}})});c.fn.collection({on:function(f,g,h){return this.bind(f,g,h)}});c.fn.collection({off:function(f,g){return this.unbind(f,g)}});c.fn.collection({unbind:function(g,h){var f=(g||"").split(/\s+/);this.each(function(){var i=this;if(g===undefined){i._private.listeners={};return}d.each(f,function(k,n){if(c.is.emptyString(n)){return this
}var m=i._private.listeners[n];if(m!=null){for(var l=0;l<m.length;l++){var o=m[l];if(h==null||h==o.callback){m.splice(l,1);l--}}}})});return this}});var b="mousedown mouseup click mouseover mouseout mousemove touchstart touchmove touchend grab drag free";d.each(b.split(/\s+/),function(h,g){var f={};f[g]=e({event:g});c.fn.collection(f)});function e(g){var f={event:""};g=d.extend({},f,g);return function(i,j){if(c.is.fn(j)){return this.bind(g.event,i,j)}else{if(c.is.fn(i)){var h=i;return this.bind(g.event,h)
}else{return this.rtrigger(g.event,i)}}}}function a(g){var f={listener:function(){},after:function(){}};g=d.extend({},f,g);return function(i,j,k){var h=this;if(k===undefined){k=j;j=undefined}d.each(i.split(/\s+/),function(l,m){if(c.is.emptyString(m)){return}h.each(function(){if(this._private.listeners[m]==null){this._private.listeners[m]=[]}var n=g.listener.apply(this,[h,this]);n.callback=k;n.data=j;this._private.listeners[m].push(n)});g.after.apply(h,[h,k,j])});return this}}})(jQuery,jQuery.cytoscapeweb);
(function(b,a){a.fn.collection({isNode:function(){return this.group()=="nodes"}});a.fn.collection({isEdge:function(){return this.group()=="edges"}});a.fn.collection({group:function(){return this.element()._private.group}})})(jQuery,jQuery.cytoscapeweb);(function(b,a){a.fn.collection({each:function(d){if(a.is.fn(d)){for(var c=0;c<this.size();c++){var e=this.eq(c).element();d.apply(e,[c,e])}}return this}});a.fn.collection({toArray:function(){var d=[];for(var c=0;c<this.size();c++){d.push(this.eq(c).element())
}return d}});a.fn.collection({slice:function(f,c){var e=[];if(c==null){c=this.size()}if(f<0){f=this.size()+f}for(var d=f;d>=0&&d<c&&d<this.size();d++){e.push(this.eq(d))}return new a.CyCollection(this.cy(),e)}});a.fn.collection({size:function(){return this.length}});a.fn.collection({eq:function(c){return this[c]}});a.fn.collection({empty:function(){return this.size()==0}})})(jQuery,jQuery.cytoscapeweb);(function($,$$){$$.fn.collection({scratch:defineAccessor({attr:"scratch"})});$$.fn.collection({removeScratch:defineRemover({attr:"scratch"})});
$$.fn.collection({renderer:defineAccessor({attr:"renderer"})});$$.fn.collection({removeRenderer:defineRemover({attr:"renderer"})});function defineAccessor(params){var defaults={attr:"scratch"};params=$.extend(true,{},defaults,params);return function(name,val){var self=this;if(name===undefined){return self.element()._private[params.attr]}var fields=name.split(".");function set(){self.each(function(){var self=this;var obj=self._private[params.attr];$.each(fields,function(i,field){if(i==fields.length-1){return
}obj=obj[field]});var lastField=fields[fields.length-1];obj[lastField]=val})}function get(){var obj=self.element()._private[params.attr];$.each(fields,function(i,field){obj=obj[field]});return obj}if(val===undefined){return get()}else{set()}return this}}function defineRemover(params){var defaults={attr:"scratch"};params=$.extend(true,{},defaults,params);return function(name){var self=this;if(name===undefined){self.each(function(){this._private[params.attr]={}})}else{var names=name.split(/\s+/);$.each(names,function(i,name){self.each(function(){eval("delete this._private."+params.attr+"."+name+";")
})})}return this}}})(jQuery,jQuery.cytoscapeweb);(function(d,b){function c(e){return function(){var f=arguments;if(f.length==2){this.bind(e.event,f[0],f[1])}else{if(f.length==1){this.bind(e.event,f[0])}else{if(f.length==0){this.each(function(){this.element()._private[e.field]=e.value});this.rtrigger(e.event)}}}return this}}function a(f){function e(h,i){var g={};g[h]=i;return g}b.fn.collection(e(f.field,function(){return this.element()._private[f.field]}));b.fn.collection(e(f.on,c({event:f.on,field:f.field,value:true})));
b.fn.collection(e(f.off,c({event:f.off,field:f.field,value:false})))}a({field:"locked",on:"lock",off:"unlock"});a({field:"grabbable",on:"grabify",off:"ungrabify"});a({field:"selected",on:"select",off:"unselect"});b.fn.collection({grabbed:function(){return this.element()._private.grabbed}})})(jQuery,jQuery.cytoscapeweb);(function(d,b){b.fn.collection({nodes:function(e){return this.filter(function(g,f){return f.isNode()})}});b.fn.collection({edges:function(e){return this.filter(function(g,f){return f.isEdge()
})}});b.fn.collection({filter:function(e){var g=this.cy();if(b.is.fn(e)){var f=[];this.each(function(j,h){h=h.element();if(e.apply(h,[j,h])){f.push(h)}});return new b.CyCollection(this.cy(),f)}else{if(b.is.string(e)){return new b.CySelector(this.cy(),e).filter(this)}else{if(e===undefined){return this}}}b.console.warn("You must pass a function or a selector to `filter`");return new b.CyCollection(this.cy())}});b.fn.collection({not:function(e){if(e==null){return this}else{if(b.is.string(e)){e=this.filter(e)
}var f=[];e=e.collection();this.each(function(j,h){var g=e._private.ids[h.id()];if(!g){f.push(h.element())}});return new b.CyCollection(this.cy(),f)}}});b.fn.collection({intersect:function(k){var m=this;if(b.is.string(k)){var h=k;return this.filter(h)}if(b.is.element(k)){k=k.collection()}var e=[];var j=this;var i=k;var l=this.size()<k.size();var g=l?j._private.ids:i._private.ids;var f=l?i._private.ids:j._private.ids;d.each(g,function(n){if(f[n]){e.push(m.cy().getElementById(n))}});return new b.CyCollection(this.cy(),e)
}});b.fn.collection({add:function(g){var f=this;if(g==null){return this}if(b.is.string(g)){var e=g;g=this.cy().elements(e)}g=g.collection();var i=[];var h={};function j(l){if(l==null){return}if(h[l.id()]==null){i.push(l);h[l.id()]=true}}this.each(function(m,l){j(l)});var k=g.collection();k.each(function(m,l){j(l)});return new b.CyCollection(this.cy(),i)}});b.fn.collection({neighborhood:function(e){var f=[];this.nodes().each(function(g,h){h.connectedEdges().each(function(i,l){var k=l.connectedNodes().not(h).element();
f.push(k);f.push(l.element())})});return this.connectedNodes().add(new b.CyCollection(this.cy(),f)).filter(e)}});b.fn.collection({neighbourhood:function(e){return this.neighborhood(e)}});b.fn.collection({closedNeighborhood:function(e){return new b.CySelector(this.cy(),e).filter(this.neighborhood().add(this))}});b.fn.collection({closedNeighbourhood:function(e){return this.closedNeighborhood(e)}});b.fn.collection({openNeighborhood:function(e){return this.neighborhood(e)}});b.fn.collection({openNeighbourhood:function(e){return this.openNeighborhood(e)
}});b.fn.collection({source:function(){var e=this.element();if(e.isNode()){b.console.warn("Can call `source()` only on edges---tried to call on node `%s`",e._private.data.id);return new b.CyCollection(e.cy())}return e.cy().getElementById(e._private.data.source).collection()}});b.fn.collection({target:function(){var e=this.element();if(e.isNode()){b.console.warn("Can call `target()` only on edges---tried to call on node `%s`",e._private.data.id);return new b.CyCollection(e.cy())}return e.cy().getElementById(e._private.data.target).collection()
}});b.fn.collection({edgesWith:a()});b.fn.collection({edgesTo:a({include:function(g,f,e){return e.target.same(f)}})});b.fn.collection({edgesFrom:a({include:function(g,f,e){return e.source.same(g)}})});function a(f){var e={include:function(i,h,g){return true}};f=d.extend(true,{},e,f);return function(h){var g=[];this.nodes().each(function(j,k){h.nodes().each(function(i,l){d.each(k.element()._private.edges[l.id()],function(n,m){if(f.include(k,l,m)){g.push(m.edge)}})})});return new b.CyCollection(this.cy(),g)
}}b.fn.collection({connectedEdges:function(e){var f=[];this.nodes().each(function(g,h){d.each(h.element()._private.edges,function(i,j){d.each(j,function(l,k){f.push(k.edge)})})});return new b.CyCollection(this.cy(),f).filter(e)}});b.fn.collection({connectedNodes:function(e){var f=[];this.edges().each(function(g,h){f.push(h.source().element());f.push(h.target().element())});return new b.CyCollection(this.cy(),f).filter(e)}});b.fn.collection({parallelEdges:c()});b.fn.collection({codirectedEdges:c({include:function(f,g,e){return e.source
}})});function c(f){var e={include:function(h,i,g){return true}};f=d.extend(true,{},e,f);return function(g){var h=[];this.edges().each(function(j,k){var l=k.source().element();var m=k.target().element();d.each(l._private.edges[m.id()],function(n,i){if(f.include(l,m,i)){h.push(i.edge)}})});return new b.CyCollection(this.cy(),h).filter(g)}}})(jQuery,jQuery.cytoscapeweb);(function(b){function a(c){this.options=c;this.cy=c.cy;this.renderer=c.renderer}a.prototype.run=function(){var c={};this.cy.elements().each(function(d,e){var f=e.group();
if(c[f]==null){c[f]=[]}c[f].push(e.json())});return c};b.cytoscapeweb("exporter","json",a)})(jQuery);(function($,$$){function CySelector(cy,onlyThisGroup,selector){if(cy===undefined||cy.$==null){$$.console.error("A selector must have a reference to the core");return}if(selector===undefined&&onlyThisGroup!==undefined){selector=onlyThisGroup;onlyThisGroup=undefined}var self=this;self._private={selectorText:null,invalid:true,cy:cy};function newQuery(){return{classes:[],colonSelectors:[],data:[],group:onlyThisGroup,ids:[],meta:[],collection:null,filter:null}
}if(selector==null||($$.is.string(selector)&&selector.match(/^\s*$/))){if(onlyThisGroup==null){self.length=0}else{self[0]=newQuery();self.length=1}}else{if($$.is.element(selector)){var collection=new $$.CyCollection(self.cy(),[selector]);self[0]=newQuery();self[0].collection=collection;self.length=1}else{if($$.is.collection(selector)){self[0]=newQuery();self[0].collection=selector;self.length=1}else{if($$.is.fn(selector)){self[0]=newQuery();self[0].filter=selector;self.length=1}else{if($$.is.string(selector)){var metaChar="[\\!\\\"\\#\\$\\%\\&\\'\\(\\)\\*\\+\\,\\.\\/\\:\\;\\<\\=\\>\\?\\@\\[\\]\\^\\`\\{\\|\\}\\~]";
var variable="(?:[\\w-]|(?:\\\\"+metaChar+"))+";var comparatorOp="=|\\!=|>|>=|<|<=|\\$=|\\^=|\\*=";var boolOp="\\?|\\!|\\^";var string="\"(?:\\\\\"|[^\"])+\"|'(?:\\\\'|[^'])+'";var number="\\d*\\.\\d+|\\d+|\\d*\\.\\d+[eE]\\d+";var value=string+"|"+number;var meta="degree|indegree|outdegree";var separator="\\s*,\\s*";var className=variable;var id=variable;function cleanMetaChars(str){return str.replace(new RegExp("\\\\("+metaChar+")","g"),"\1")}$.each(comparatorOp.split("|"),function(i,op){comparatorOp+="|@"+op
});var exprs={group:{regex:"(node|edge)",populate:function(group){this.group=group+"s"}},state:{regex:"(:selected|:unselected|:locked|:unlocked|:visible|:hidden|:grabbed|:free|:removed|:inside|:grabbable|:ungrabbable|:animated|:unanimated)",populate:function(state){this.colonSelectors.push(state)}},id:{regex:"\\#("+id+")",populate:function(id){this.ids.push(cleanMetaChars(id))}},className:{regex:"\\.("+className+")",populate:function(className){this.classes.push(cleanMetaChars(className))}},dataExists:{regex:"\\[\\s*("+variable+")\\s*\\]",populate:function(variable){this.data.push({field:cleanMetaChars(variable)})
}},dataCompare:{regex:"\\[\\s*("+variable+")\\s*("+comparatorOp+")\\s*("+value+")\\s*\\]",populate:function(variable,comparatorOp,value){this.data.push({field:cleanMetaChars(variable),operator:comparatorOp,value:value})}},dataBool:{regex:"\\[\\s*("+boolOp+")\\s*("+variable+")\\s*\\]",populate:function(boolOp,variable){this.data.push({field:cleanMetaChars(variable),operator:boolOp})}},metaCompare:{regex:"\\{\\s*("+meta+")\\s*("+comparatorOp+")\\s*("+number+")\\s*\\}",populate:function(meta,comparatorOp,number){this.meta.push({field:cleanMetaChars(meta),operator:comparatorOp,value:number})
}}};self._private.selectorText=selector;var remaining=selector;var i=0;function consumeExpr(){var expr;var match;var name;$.each(exprs,function(n,e){var m=remaining.match(new RegExp("^"+e.regex));if(m!=null){match=m;expr=e;name=n;var consumed=m[0];remaining=remaining.substring(consumed.length);return false}});return{expr:expr,match:match,name:name}}function consumeWhitespace(){var match=remaining.match(/^\s+/);if(match){var consumed=match[0];remaining=remaining.substring(consumed.length)}}function consumeSeparators(){var match=remaining.match(new RegExp("^"+separator));
if(match){var consumed=match[0];remaining=remaining.substring(consumed.length);self[++i]=newQuery()}}self[0]=newQuery();consumeWhitespace();for(;;){consumeSeparators();var check=consumeExpr();if(check.name=="group"&&onlyThisGroup!=null&&self[i].group!=onlyThisGroup){$$.console.error("Group `%s` conflicts with implicit group `%s` in selector `%s`",self[i].group,onlyThisGroup,selector);return}if(check.expr==null){$$.console.error("The selector `%s` is invalid",selector);return}else{var args=[];for(var j=1;
j<check.match.length;j++){args.push(check.match[j])}check.expr.populate.apply(self[i],args)}if(remaining.match(/^\s*$/)){break}}self.length=i+1}else{$$.console.error("A selector must be created from a string; found %o",selector);return}}}}}self._private.invalid=false}$.cytoscapeweb.CySelector=CySelector;CySelector.prototype.cy=function(){return this._private.cy};CySelector.prototype.size=function(){return this.length};CySelector.prototype.eq=function(i){return this[i]};CySelector.prototype.find=function(){};
CySelector.prototype.filter=function(collection,addLiveFunction){var self=this;if(self._private.invalid){return new $$.CyCollection(self.cy())}var selectorFunction=function(i,element){for(var j=0;j<self.length;j++){var query=self[j];if(query.group!=null&&query.group!=element._private.group){continue}var allColonSelectorsMatch=true;for(var k=0;k<query.colonSelectors.length;k++){var sel=query.colonSelectors[k];var renderer=self.cy().renderer();switch(sel){case":selected":allColonSelectorsMatch=element.selected();
break;case":unselected":allColonSelectorsMatch=!element.selected();break;case":locked":allColonSelectorsMatch=element.locked();break;case":unlocked":allColonSelectorsMatch=!element.locked();break;case":visible":allColonSelectorsMatch=renderer.elementIsVisible(element);break;case":hidden":allColonSelectorsMatch=!renderer.elementIsVisible(element);break;case":grabbed":allColonSelectorsMatch=element.grabbed();break;case":free":allColonSelectorsMatch=!element.grabbed();break;case":removed":allColonSelectorsMatch=element.removed();
break;case":inside":allColonSelectorsMatch=!element.removed();break;case":grabbable":allColonSelectorsMatch=element.grabbable();break;case":ungrabbable":allColonSelectorsMatch=!element.grabbable();break;case":animated":allColonSelectorsMatch=element.animated();break;case":unanimated":allColonSelectorsMatch=!element.animated();break}if(!allColonSelectorsMatch){break}}if(!allColonSelectorsMatch){continue}var allIdsMatch=true;for(var k=0;k<query.ids.length;k++){var id=query.ids[k];var actualId=element._private.data.id;
allIdsMatch=allIdsMatch&&(id==actualId);if(!allIdsMatch){break}}if(!allIdsMatch){continue}var allClassesMatch=true;for(var k=0;k<query.classes.length;k++){var cls=query.classes[k];allClassesMatch=allClassesMatch&&element.hasClass(cls);if(!allClassesMatch){break}}if(!allClassesMatch){continue}function operandsMatch(params){var allDataMatches=true;for(var k=0;k<query[params.name].length;k++){var data=query[params.name][k];var operator=data.operator;var value=data.value;var field=data.field;var matches;
if(operator!=null&&value!=null){var fieldStr=""+params.fieldValue(field);var valStr=""+eval(value);var caseInsensitive=false;if(operator.charAt(0)=="@"){fieldStr=fieldStr.toLowerCase();valStr=valStr.toLowerCase();operator=operator.substring(1);caseInsensitive=true}if(operator=="="){operator="=="}switch(operator){case"*=":matches=fieldStr.search(valStr)>=0;break;case"$=":matches=new RegExp(valStr+"$").exec(fieldStr)!=null;break;case"^=":matches=new RegExp("^"+valStr).exec(fieldStr)!=null;break;default:if(caseInsensitive){var expr="fieldStr "+operator+" valStr";
matches=eval(expr)}else{var expr=params.fieldRef(field)+" "+operator+" "+value;matches=eval(expr)}}}else{if(operator!=null){switch(operator){case"?":matches=params.fieldTruthy(field);break;case"!":matches=!params.fieldTruthy(field);break;case"^":matches=params.fieldUndefined(field);break}}else{matches=!params.fieldUndefined(field)}}if(!matches){allDataMatches=false;break}}return allDataMatches}var allDataMatches=operandsMatch({name:"data",fieldValue:function(field){return element._private.data[field]
},fieldRef:function(field){return"element._private.data."+field},fieldUndefined:function(field){return element._private.data[field]===undefined},fieldTruthy:function(field){if(element._private.data[field]){return true}return false}});if(!allDataMatches){continue}var allMetaMatches=operandsMatch({name:"meta",fieldValue:function(field){return element[field]()},fieldRef:function(field){return"element."+field+"()"},fieldUndefined:function(field){return element[field]()==undefined},fieldTruthy:function(field){if(element[field]()){return true
}return false}});if(!allMetaMatches){continue}if(query.collection!=null){var matchesAny=query.collection._private.ids[element.id()]!=null;if(!matchesAny){continue}}if(query.filter!=null&&element.collection().filter(query.filter).size()==0){continue}return true}return false};if(self._private.selectorText==null){selectorFunction=function(){return true}}var filteredCollection=collection.filter(selectorFunction);if(addLiveFunction){var key=self.selector();var structs=self.cy()._private;filteredCollection.live=function(events,data,callback){var evts=events.split(/\s+/);
$.each(evts,function(i,event){if($$.is.emptyString(event)){return}if(callback===undefined){callback=data;data=undefined}if(structs.live[event]==null){structs.live[event]={}}if(structs.live[event][key]==null){structs.live[event][key]=[]}structs.live[event][key].push({callback:callback,data:data})});return this};filteredCollection.die=function(event,callback){if(event==null){$.each(structs.live,function(event){if(structs.live[event]!=null){delete structs.live[event][key]}})}else{var evts=event.split(/\s+/);
$.each(evts,function(j,event){if(callback==null){if(structs.live[event]!=null){delete structs.live[event][key]}}else{if(structs.live[event]!=null&&structs.live[event][key]!=null){for(var i=0;i<structs.live[event][key].length;i++){if(structs.live[event][key][i].callback==callback){structs.live[event][key].splice(i,1);i--}}}}})}return this}}return filteredCollection};CySelector.prototype.toString=CySelector.prototype.selector=function(){var str="";function clean(obj){if($$.is.string(obj)){return obj
}return""}for(var i=0;i<this.length;i++){var query=this[i];var group=clean(query.group);str+=group.substring(0,group.length-1);for(var j=0;j<query.data.length;j++){var data=query.data[j];str+="["+data.field+clean(data.operator)+clean(data.value)+"]"}for(var j=0;j<query.colonSelectors.length;j++){var sel=query.colonSelectors[i];str+=sel}for(var j=0;j<query.ids.length;j++){var sel="#"+query.ids[i];str+=sel}for(var j=0;j<query.classes.length;j++){var sel="."+query.classes[i];str+=sel}if(this.length>1&&i<this.length-1){str+=", "
}}return str}})(jQuery,jQuery.cytoscapeweb);